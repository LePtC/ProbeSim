
更新日志
======

###2016.05.08

在 [w3schools](http://www.w3schools.com/games/default.asp) 学习 Javascript 游戏开发，发现可以看懂，于是想开发一个类似 [Duskers](http://search.bilibili.com/all?keyword=duskers) 的游戏作为练习。游戏属于解谜类型，操作方式类似命令行（我大概只能做到组合键…），控制若干个 Probe 探索未知的地图，思考如何探测并杀死敌人，搜集模块使 Probe 升级新功能等等。


###2016.05.10.v1

游戏以 [w3schools 最后这个](http://www.w3schools.com/games/game_movement.asp) 为模版开始开发。首先是 Probe 和墙的碰撞问题，尝试用速度反向来解决，但发现这样的话会有反向按键就能穿墙的 bug…

考虑了正方形的旋转会增加 Probe 的碰撞体积。加入了 relax 机制，在 Probe 蹭墙的过程中角度会被动调正，以后玩家通过较窄的门时的体验会更好。


###2016.05.10.v2

上一版本 relax 角度计算有错，借助 Mathematica 才把公式写对

Probe 终于不会穿墙了，不过似乎获得了蹭墙侧滑的技能…

Probe 走出屏幕可能会找不到了… 这个暂时不打算修复


###2016.05.10.v3

加入地图数组，然后由数组生成墙实体，一次成功

发现 Probe 可通过蹭墙侧滑来穿旁边的墙…


###2016.05.10.v4

Probe 终于不会穿墙也不会侧滑了，强行往墙上开的话会像真实机器人一样在墙附近震动。

往墙角里开的话角能扎进墙里，有一定几率可以从右下墙角隧穿出去，其它墙角则不会，似乎和小于号/小于等于号有关…


###2016.05.10.v5

给不等式都加上了等号的情况，调低速度，还是能隧穿。碰撞体积也不能设太大，不然卡在门中间也会震…

减小 Probe 的尺寸以便能在一格宽的走廊转身，减小后好像就不隧穿了…


###2016.05.10.v6

实现径向递减照明系统


###2016.05.11.v1

加入倾斜因子 1/2(1+cosθ) （求 cos 直接用内积实现），并 3 次方限制照明方位角

###2016.05.11.v2

地图精细度增加，Probe 现最窄能通过两格宽的通道（转身会有震动）

###2016.05.11.v3

实现墙对光线的阻挡，以后加入敌人 AI 后还可以用来判断视野

###2016.05.11.v4

反转了背景和前景，现在墙也需要被照才亮了

去掉了左侧准备给母舰预留的空间，感觉暂时没用

###2016.05.11.v5

通过预判节约了些计算量

墙对光线的阻挡通过类似卷积的原理平滑了

给墙单独补光

###2016.05.11.v6

加入了鼠标和触屏控制（用到了转动变换阵…）

###2016.05.11.v7

发现在移动设备上玩很卡，果然很耗 CPU 么

降低检测密度，这样位于角里的墙块也能被照亮了

以及其它参数微调


